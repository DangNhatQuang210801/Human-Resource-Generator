@model List<Employee>
<br />
<h1 class="display-4">SEDV Generator</h1>
<div text-end>
    <a asp-controller="Generator" asp-action="Create" class="btn btn-primary">
        <i class="bi bi-people"></i> New Employee
    </a>

</div>
<div>
    <br />
    <form asp-action="Index" class="d-flex" method="get">
        <div class="form-group">
            <input name="SearchName" class="me-sm-2" type="text" placeholder="Search" value="@ViewData["CurrentFilter"]"/>
            <input type="submit" value="Search" class="btn btn-secondary my-2 my-sm-0" />
        </div>
    </form>

<br />
    <table class="table table-bordered table-striped" style="width:100%">
        <thead>
            <tr>
                <th>Employee's number</th>
                <th>Name</th>
                <th>Department</th>
                <th>Birthday</th>
                <th>Training</th>
                <th>Room</th>
                <th>Date Of Training</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var employee in Model)
            {
                <tr>
                    <td width="10%">@employee.employee_number</td>
                    <td width="14%">@employee.employee_name</td>
                    <td width="8%">@employee.employee_department</td>
                    <td width ="10%">@employee.date_of_birth.ToShortDateString()</td>
                    <td width="14%">
                        <ul>
                            @{
                                var program_names = employee.employee_training.Select(s => s.TrainingProgram.program_name);
                                foreach (var program_name in program_names)
                                {
                                    <li>@program_name</li>
                                }
                            }
                        </ul>
                        
                    </td>
                    <td width="10%">
                        <ul>
                            @{
                                var descriptions = employee.employee_training.Select(s => s.TrainingProgram.program_description);
                                foreach (var description in descriptions)
                                {
                                    <li>@description</li>
                                }
                            }
                        </ul>
                    </td>
                    <td width="14%">
                        <ul>
                            @{
                                var dates = employee.employee_training.Select(s => s.TrainingProgram.date_of_program.ToShortDateString());
                                foreach (var date in dates)
                                {
                                    <li>@date</li>
                                }
                            }
                        </ul>
                    </td>
                    <td width="14%">
                        <a href="#">Edit</a>
                        <a href="#" style="color:red">Delete</a>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>
